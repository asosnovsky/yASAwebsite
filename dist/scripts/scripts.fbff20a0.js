function $each(a,b,c){var d=-1,e=a.length>>>0;!function f(g){var h,i=g===!1;do++d;while(!(d in a)&&d!==e);return i||d===e?void(c&&c(!i,a)):(g=b.call({async:function(){return h=!0,f}},a[d],d,a),void(h||f(g)))}()}angular.module("yuAsaApp",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"MainCtrl"}).when("/qualification",{templateUrl:"views/qualification.html",controller:"MainCtrl"}).when("/employment",{templateUrl:"views/employment.html",controller:"MainCtrl"}).when("/news/:pag",{templateUrl:"views/news.html",controller:"NewsCtrl"}).when("/newsbit/:tid/:id",{templateUrl:"views/article.html",controller:"NewsbitCtrl"}).when("/news",{redirectTo:"/news/1"}).otherwise({redirectTo:"/"})}]),angular.module("yuAsaApp").service("$york",["$location","$http","$sce",function(a,b,c){this.goTo=function(b,c){c||(c=""),a.path(b).replace(),a.hash(c),window.scrollTo(0,0)},this.tumblr=function(){function a(){}var d="//api.tumblr.com/v2/blog/",e="asayorku.tumblr.com/posts",f="9JEt1AQMzS7zhaLwn9I9kRlyq0MHzW7SkGxyjg3PIGmGKbC1Ek",g="JSON_CALLBACK",h=200,i={posts:[],partialposts:[],total_posts:"",posts_by_id:{}};return a.prototype.get=function(a){""!==i.total_posts?a(!1,i):b.jsonp(d+e+"?api_key="+f+"&limit="+h+"&callback="+g).success(function(b){if(401===b.meta.status||b.response===[])throw a(!0,{title:"Data Error",body:"Sorry we encoutered some issues with our news-source",link:"",time:moment().fromNow(),img:"images/error/Error02.jpg"}),new Error("Could not retrieve tumblr data; E:"+b.meta.status);$each(b.response.posts,function(a,b){var d,e=a.body.substring(a.body.indexOf("<img"),a.body.indexOf('"/>')+3);try{d=$(e)[0].src}catch(f){d="./images/misc/noimage.jpg"}i.posts[b]={title:a.title,id:a.id,body:c.trustAsHtml(a.body),link:a.post_url,time:moment(a.date).fromNow(),img:d},i.partialposts[b]={title:a.title,id:a.id,body:a.body.replace(/<[^>]*>/g,"").substr(0,210)+"...",link:a.post_url,time:moment(a.date).fromNow(),img:d}}),i.total_posts=b.response.total_posts,a(!1,i)})},a.prototype.request=function(b,d){(new a).get(function(a,e){if(!a)if(i.posts_by_id[b])d(!1,i.posts_by_id[b]);else{var f=0;$each(e.posts,function(a,e){parseInt(b)===parseInt(a.id)&&e<=i.total_posts?(i.posts_by_id[b]=a,d(!1,a)):e<=i.total_posts&&f++,f===i.total_posts&&d(!0,{title:"Article Eror",body:c.trustAsHtml("<p>Sorry we couldn't find your article, perhaps the wrong address? or its too old?</p>"),link:"",time:moment().fromNow(),img:"images/error/Error01.jpg"})})}})},new a}()}]),angular.module("yuAsaApp").controller("MainCtrl",["$scope","$york",function(a,b){b.tumblr.get(function(b,c){a.tumblr=b?[c]:c.partialposts}),a.goTo=b.goTo}]),angular.module("yuAsaApp").controller("HeaderCtrl",["$scope","$location","$york",function(a,b,c){a.goTo=c.goTo,window.screen.width<=760&&$(".nav a").on("click",function(){$(".navbar-toggle").click()})}]),angular.module("yuAsaApp").controller("NewsCtrl",["$scope","$york","$routeParams","$location",function(a,b,c,d){a.goTo=b.goTo,a.tumblr={requested_posts:[]},b.tumblr.get(function(e,f){if(e)a.tumblr.requested_posts=[f];else{var g=parseInt(c.pag),h=Math.ceil(parseInt(f.total_posts)/5);a.changePag=function(a){console.log(a),0===a?b.goTo("news/"+(g+1)):-1===a?b.goTo("news/"+(g-1)):a>=1&&b.goTo("news/"+a)},g>=3&&h>=g?a.pagnation=[{"class":"",value:g-2,href:""},{"class":"",value:g-1,href:""},{"class":"active",value:g,href:""},{"class":"",value:g+1,href:""},{"class":"",value:g+2,href:""}]:1===g?a.pagnation=[{"class":"active",value:1,href:""},{"class":"",value:2,href:""},{"class":"",value:3,href:""},{"class":"",value:4,href:""},{"class":"",value:5,href:""}]:2===g&&h>=g?a.pagnation=[{"class":"",value:1,href:""},{"class":"active",value:2,href:""},{"class":"",value:3,href:""},{"class":"",value:4,href:""},{"class":"",value:5,href:""}]:g===h&&g>=5?a.pagnation=[{"class":"",value:g-4,href:""},{"class":"",value:g-3,href:""},{"class":"",value:g-2,href:""},{"class":"",value:g-1,href:""},{"class":"active",value:g,href:""}]:g>h?(d.path("news/"+h+"#MAX-REACHED").replace(),d.hash("")):0>=g&&(d.path("news/1#MIN-REACHED").replace(),d.hash(""));for(var i=5*(g-1),j=5*(g-1)+5;i<=f.total_posts-1&&j>=i;)a.tumblr.requested_posts.push(f.partialposts[i]),i++}})}]),angular.module("yuAsaApp").controller("NewsbitCtrl",["$scope","$york","$routeParams",function(a,b,c){a.tumblr={newsbit:{}},"ASA"===c.id?b.tumblr.request(c.tid,function(b,c){a.tumblr.newsbit=b?c:c}):b.tumblr.get(function(b,d){a.tumblr.newsbit=b?d:d.posts[c.id]})}]),angular.module("yuAsaApp").controller("SideBarCtrl",["$scope","$york",function(a,b){a.goTo=b.goTo,a.sidebar={current_posts:[]},b.tumblr.get(function(b,c){b?a.sidebar.current_posts.push(c):$.each(c.partialposts,function(b,c){a.sidebar.current_posts.push(c)})})}]);